# tpdatabase

## О проекте
 
Проект "TelePhone Database" представляет собой программу, написанную на языке программирования С, осуществляющей обработку 
данных некой телефонной компании из файла (документа) и запись результата обратно, при этом часть данных для основного файла
(документа) берётся из файлов (справочников), которые также являются частью проекта. Также, в проекте имеются 
вспомогательные файлы, данные которых используются для показа информации о справки. В проекте также имеется файл "Doxygen", 
позволяющий улучшить документацию кода.

## Цели проекта

Целью данного проекта является создание инструментов для редактирования информации в базе данных, а также для комфортной работы
с ней. Ниже будут перечисленны главные задачи, которые должна решать программа:

1. Открытие, закрытие, чтение и сохранение файла.
2. Добавление записи в файл.
3. Удаление записи из файла.
4. Редактирование записи файла.
5. Вывод документа (со справочниками) на экран.
6. Вывод содержимого справочников на экран.
7. Добавление ещё одного справочника.

Программа должна автоматически определять конфликт записев документа и справочников и, в некоторых случаях по желанию 
пользователя, решать их.

## Входные данные программы
 
Входные данные, с которыми работает программа, состоят из четырёх частей - документа и трёх справочников.
  
В документе "tele.db" хранятся следующие данные:
  
- id записи
- Номер телефона абонента
- id имени, соответствующее id в справочнике «name.db»
- id тарифа, соответствующее id в справочнике «tariff.db»
- Адрес абонента
- id льготы, соответствующее id в справочнике «benefit.db»   
  
В справочнике "name.db" хранятся следующие данные:

- id записи
- Имя абонента
  
В справочнике «tariff.db» хранятся следующие данные:
  
- id записи
- Тариф абонента
    
В справочнике «benefit.db» хранятся следующие данные:
  
- id записи
- Льгота абонента


## Выходные данные программы
 
Выходными данными являются обработанные программой входные данные а также запись всех данных в один файл txt.


## Алгоритм решения задачи
 
Алгоритм сопоставления записей из основного документа по их ID с записями из справочников будет разобран на примере документа
«tele.db» и справочника «name.db». В структуре документа для справочника «name.db» хранится ещё одна структура с указателем
«name», в которой содержится «id" имени и указатель на его имя в справочнике «name.db». При считывании файла, если документ 
и
справочник открыты, проверяется совпадения значений записей «id имени» в документе и «id» записи в справочнике «name.db». В
случае успеха, указатель в документе присваивается  значению имени, соответствующее значению «id» в справочнике. В случае
неудачи, указателю присваивается значение общей переменной, значение которой равно «нет данных». Для остальных справочников
алгоритм аналогичен.

## Дополнительные возможности программного продукта

Здесь описаны дополнительные возможности ПО, которые не были предусмотрены при постановке задачи:

1. Автоматическое открытие файлов. Если пользователь выбрал команду, для выполнение которой требуется файлы, которые в 
настоящий момент закрыты, то программа сообщит об этом, скажет, какие необходимые для работы файл закрыты и предложит открыть 
их или же вернуться обратно. После чего выполнит вариант действия, выбранный пользователем и продолжит работу.

2. Сохранение изменений при закрытии файла и при выходе из программы. Если пользователь ввёл команду закрытия файла и до 
этого внёс какие-либо изменения в этот файл, то программа предложит сохранить эти изменения перед закрытием файла или же 
просто закрыть файл без изменений. Потом программа сохранит изменения в случае положительного ответа и закроет файл или же 
просто закроет файл без сохранения. Почти тоже самое произойдёт, если пользователь попытается выйти из программы, только в 
этом случае программа выведен список не сохранённых файлов, если они имеются.

3. Кроссплатформенность — программа может работать на платформах MS Windows, Linux и Mac OS X.

## Инструкция по установке ПО

### Требование к аппаратному обеспечению компьютера

 - Процессор с архитектурой x86-64
 - Объём свободной оперативной памяти от 1 МБ
 - 1 MБ свободного пространства на жёстком диске
 - SVGA-видеокарта
 - Компьютер должен быть укомплектован монитором, клавиатурой и мышью

### Требование в программному обеспечению компьютера
 
 - MS Windows –  XP, Vista, 7, 8, 8.1, 10
 - Linux –  версия ядра не ниже 2.6.37
 - Mac OS X — версия 10.4 Tiger и выше.

### Описание действий по установке ПО на компьютер

#### Windows:

1. Распакуйте архив «tpdatabase.rar» в нужный вам каталог.
2. Для запуска программы следует запустить исполняемый файл «tpdatabase.exe».

#### Linux:

1. Распакуйте архив «tpdatabase.rar» в нужный вам каталог.
2. Запустить программу вы можете двумя способами:
    1. В консоли зайти в каталог с программой и выполнить «./tpdatabase».
    2. В графической среде запустите sh-скрипт  «tpdatabase.sh». Перед запуском убедитесь, чтобы у файла были права на его 
выполнение.

#### Mac OS X:

1. Распакуйте архив «tpdatabase.rar» в нужный каталог.
2. Для запуска программы следует запустить исполняемый файл «tpdatabase.app».

## Вывод

### Достоинства используемых в работе методов:

1. Алгоритм сопоставления записей из основного документа по их ID записям из справочников, путём создания для каждого 
справочника дополнительной структуры в структуре документа, позволяет достаточно просто и эффективно присваивать указатели к 
значениям справочников.

2. Алгоритм изменения записи позволяет изменять запись в файлах с высокой удобностью, которая заключается в том, что 
пользователь может изменить только ту запись, которую он захочет изменить, оставив другие пустыми, нажав Enter.

### Недостатки используемых в работе методов:

1. Алгоритм «Добавление ещё одного справочника» позволяет добавить только один справочник, а не несколько. К тому же в 
структуре документа выделяется память сразу под три справочника, даже когда добавлено только два, что приводит лишнему 
расходу памяти.

2. Алгоритм «Сохранить» работает по принципу «всё стереть и записать заново», что может привести к достаточно долгому времени 
записи при большом размере файла. Этого можно было бы частично избежать, если сохранять только изменения файла, не 
перезаписывая весь файл.

### Достоинства ПО

Ниже перечисленны достоинства ПО, некоторые из которых вытекают из достоинств используемых методов:

1. Автоматическое открытие и сохранение файлов.
2. Высокое удобство редактирования записи файла.

### Недостатки ПО

Ниже перечисленны Недостатки ПО, некоторые из которых также вытекают из недостатков используемых методов:

1. Программа нерационально расходует память компьютера.
2. При возникновении какой-либо ошибки при сохранении файла, есть шанс потерять не только те данные, которые изменялись, 
но и те данные, которые не изменялись.

В заключение можно сказать, что данную программу можно рекомендовать в самых различных областях, где требуется учёт 
абонентов с их личными данными, а также, с небольшими изменениями в программе, и в других областях, где требуются 
инструменты редактирования баз данных.
